[user]
	name = Matt Michie
	email = mmichie@gmail.com
	signingkey = ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIEUwxYQhqytNcE3C2yjoY67vOZcSDEX+o2kWXBPznRNq

[core]
	excludesfile = ~/.gitignore_global
	pager = delta

[interactive]
	diffFilter = delta --color-only

[delta]
	navigate = true
	line-numbers = true
	syntax-theme = Dracula

[merge]
	conflictstyle = zdiff3

[color]
	branch = on
	diff = on
	interactive = on
	status = on

[gpg]
	format = ssh

[gpg "ssh"]
	program = /Applications/1Password.app/Contents/MacOS/op-ssh-sign

[commit]
	gpgsign = true

[push]
	autoSetupRemote = true

[diff "nodiff"]
	command = /usr/bin/true

[alias]
        ai-commit = "!f() { \
                git diff --staged | intu commit --provider claude > .git/COMMIT_EDITMSG && \
                git commit -t .git/COMMIT_EDITMSG; \
        }; f"

	# Branch helpers
	mainbranch = !git symbolic-ref refs/remotes/origin/HEAD | cut -d'/' -f4
	current-branch = symbolic-ref --short HEAD

	# Workflow shortcuts
	co = checkout --recurse-submodules
	ci = commit
	cm = commit -m
	d = diff
	di = diff --cached
	s = show
	st = status -sb

	# Logging
	graph = log --branches --pretty=short --decorate --graph
	history = log --stat --patch --
	l = log --pretty=oneline --abbrev-commit --max-count=18
	ll = log --pretty=oneline --abbrev-commit
	gl = log --graph --all --decorate --oneline
	gll = log --graph --all --decorate --pretty=format:'%C(yellow)%h%Creset%C(auto)%d%Creset %s %C(white)- %an, %ar%Creset'

	# Search commits
	ack = log --all -p -S

	# Stash with better names
	shelve = stash save
	unshelve = stash pop

	# Remote operations
	fo = fetch origin
	fu = fetch upstream
	po = push origin
	pu = push upstream

	# Safe pull - fast-forward only
	pull = pull --ff-only
	up = merge --ff-only
	rom = rebase origin/master

	# Branch cleanup
	clean-branches = !git remote prune origin && git branch -vv | grep ': gone]' | awk '{print $1}' | xargs git branch -d 2>/dev/null || true
	delete-branch = !sh -c 'git push origin :$1 && git branch -D $1' -
	clean-local-branches = !git branch --merged | grep -v '\\*\\|master\\|main' | xargs -n 1 git branch -d 2>/dev/null || true

[difftool "sourcetree"]
	cmd = opendiff \"$LOCAL\" \"$REMOTE\"
	path =

[mergetool "sourcetree"]
	cmd = /Applications/Sourcetree.app/Contents/Resources/opendiff-w.sh \"$LOCAL\" \"$REMOTE\" -ancestor \"$BASE\" -merge \"$MERGED\"
    trustExitCode = true

#[includeIf "gitdir:~/src/Prime/"]
	path = ~/.gitconfig-prime-local

[includeIf "gitdir:~/src/tensor9.com-v2/"]
	path = ~/.gitconfig-prime-local

[url "ssh://git@github.com/"]
#	insteadOf = https://github.com/

[url "git@github.com:shiprock/"]
	insteadOf = https://github.com/shiprock/

[include]
	path = ~/.gitconfig.local
